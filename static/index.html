<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Pin Hentai Pic</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/waterfall.css">
    <style>
        .item img { width: 192px;}
    </style>
</head>
<body>
<script src="/js/handlebars.js"></script>
<script src="/js/jquery.js"></script>
<script src="/js/waterfall.js"></script>
<script src="/js/mustache.js"></script>

<div id="container"></div>
<script type="text/x-handlebars-template" id="waterfall-tpl">
{{#result}}
    <div class="item">
        <img src="{{image}}" width="{{width}}" height="{{height}}" />
    </div>
{{/result}}
</script>
<script>
$('#container').waterfall({
    itemCls: 'item',
    colWidth: 222,
    gutterWidth: 15,
    gutterHeight: 15,
    checkImagesLoaded: false,
    path: function(page) {
        return 'page/?page=' + page;
    },
    callbacks: {
        /*
        * 处理ajax返回数方法
        * @param {String} data
        */
       renderData: function (data) {
           var template = $('#waterfall-tpl').html();

           return Mustache.to_html(template, data).replace(/^\s*/mg, '')
       }
    }
});
</script>
</body>
</html>
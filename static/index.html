<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Pin Hentai Pic</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/main.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/mustache.min.js"></script>
    <script src="/js/imagesloaded.pkgd.min.js"></script>
    <script src="/js/wookmark.min.js"></script>
    <script src="/js/layout.js"></script>
</head>
<body>
<div class="top">
    tool bar
</div>
<div role="main">
    <ul id="container" class="tiles-wrap animated">
        <!-- These is where we place content loaded from the Wookmark API -->
    </ul>
    <div id="loader">
        <div id="loaderCircle"></div>
    </div>
</div>

<div class="closeup"></div>
<script type="text/template" id="closeup-tpl">
    <div class="closeup-panel">
        <div class="closeup-con">
            <div class="closeup-img">
                <div class="closeup-tool"></div>
                <img src="{{&img}}" width="800" alt="Image 001"/>
            </div>
            <div class="closeup-sidebar">sb</div>
        </div>
    </div>
</script>
<script type="text/template" id="pin-tpl">
    {{#image}}
    <li>
        <a href="{{&image}}" data-img="{{&image}}">
            <img src="{{&image}}" width="250" alt="Image 001"/>
        </a>

        <div class="pinMeta">
            <p>{{desc}} <br>{{sw}} x {{sh}}</p>
        </div>
        <div class="pinRef">
            <a href="/">Pinture.com</a>
        </div>
    </li>
    {{/image}}
</script>
<script type="text/javascript">
    $(document).ready(function () {
        var closeup = $('.closeup');
        closeup.delegate('.closeup-panel', 'click', function (e) {
            var closeupBg = $('.closeup-panel');
            $('body').css('overflow', 'auto');
            closeupBg.remove();
        });

        $('ul').delegate('a', 'click', function (e) {
            $('body').css('overflow', 'hidden');
            e.preventDefault();
            var tpl = $('#closeup-tpl').html();
            var html = Mustache.render(tpl, {img: $(this).data('img')});
            $('.closeup').append(html);
            var closeupcon = $(".closeup-con");
            var left = parseInt(( ($(document).width() - closeupcon.width()) / 2 ));
            closeupcon.css('margin-left', left);
            console.log('click', left);
        });
        console.log('ready');
    });
</script>
</body>
</html>